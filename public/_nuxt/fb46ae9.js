(window.webpackJsonp=window.webpackJsonp||[]).push([[25,5,7,10],{533:function(t,e,r){"use strict";r.r(e);var l={props:{value:Boolean},watch:{$props:{deep:!0,handler:function(t){this.props=JSON.parse(JSON.stringify(t))}}},data:function(){return{props:JSON.parse(JSON.stringify(this.$props))}},methods:{emitValue:function(){this.$emit("value",this.props.value),this.$emit("input",this.props.value),this.$emit("change",this.props.value)}}},n=r(10),component=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("transition",{attrs:{name:"custom-unique-name","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[t.props.value?r("div",{staticClass:"modal show",staticStyle:{display:"block",background:"#00000044","animation-duration":"200ms"},attrs:{tabindex:"-1"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.props.value=!1,t.emitValue()}}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[t._t("header"),t._v(" "),r("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:function(e){t.props.value=!1,t.emitValue()}}})],2),t._v(" "),r("div",{staticClass:"modal-body"},[t._t("body")],2),t._v(" "),r("div",{staticClass:"modal-footer"},[t._t("footer")],2)])])]):t._e()])],1)}),[],!1,null,null,null);e.default=component.exports},542:function(t,e,r){"use strict";r.r(e);r(46),r(45),r(145);var l={props:{value:{default:""},height:{default:"150px"},preview:{default:!0}},watch:{$props:{deep:!0,handler:function(t){this.props=JSON.parse(JSON.stringify(t))}}},methods:{emitValue:function(){this.$emit("value",this.props.value),this.$emit("input",this.props.value),this.$emit("change",this.props.value)},browser:function(){var t=this;Object.assign(document.createElement("input"),{type:"file",onchange:function(e){t.upload(e.target.files[0])}}).click()},dropFile:function(t){this.upload(t.dataTransfer.files[0])},upload:function(t){var e=this,data=new FormData;data.append("file",t,t.name),this.$axios.post("/api/files/upload",data,{onUploadProgress:function(t){e.progress=Math.round(100*t.loaded/t.total)}}).then((function(t){e.progress=0,e.props.value=t.data.url,e.emitValue()}))}},computed:{compValue:function(){if(this.props.value){var t={url:this.props.value};return t.ext=t.url.split(".").pop().toLowerCase(),t.type=!1,["jpg","jpeg","png","bmp","gif","webp","svg"].indexOf(t.ext)>=0&&(t.type="image"),["mp3","ogg"].indexOf(t.ext)>=0&&(t.type="audio"),t}return!1}},data:function(){return{props:JSON.parse(JSON.stringify(this.$props)),progress:0,file:!1,modal:!1}}},n=r(10),component=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{on:{drop:function(e){return e.preventDefault(),t.dropFile.apply(null,arguments)},dragover:function(t){t.preventDefault()}}},[r("div",{staticClass:"input-group"},[r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn rounded-0",attrs:{type:"button"},on:{click:function(e){return t.browser()}}},[r("i",{staticClass:"fas fa-upload"})])]),t._v(" "),r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn rounded-0",attrs:{type:"button"},on:{click:function(e){t.modal=!0}}},[r("i",{staticClass:"fas fa-link"})])]),t._v(" "),r("div",{staticClass:"form-control",staticStyle:{overflow:"hidden"}},[t._v(t._s(t.props.value||"Sem arquivo"))])]),t._v(" "),t.progress?r("div",{staticClass:"progress",staticStyle:{height:"5px"}},[r("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",style:"width: "+t.progress+"%",attrs:{role:"progressbar","aria-valuenow":t.progress,"aria-valuemin":"0","aria-valuemax":"100"}})]):t._e(),t._v(" "),t.preview?r("div",{staticClass:"mt-2",style:"height:"+t.height+"; background:#f5f5f5; border:dashed 3px #ccc; display:flex; align-items:center; justify-content:center; cursor:pointer;",on:{click:function(e){return t.browser()}}},[t.compValue?t._e():r("div",[r("small",{staticClass:"d-block text-muted"},[t._v("Soltar arquivo")])]),t._v(" "),t.compValue?r("div",["image"==t.compValue.type?r("div",[r("img",{style:"margin:0 auto; max-height:calc("+t.height+" - 20px);",attrs:{src:t.compValue.url,alt:""}})]):r("div",[t._v("\n                "+t._s(t.compValue.type)+"\n            ")])]):t._e()]):t._e(),t._v(" "),r("ui-modal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v("header")]},proxy:!0},{key:"body",fn:function(){return[r("ui-field",{attrs:{label:"URL"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.props.value,expression:"props.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.props.value},on:{input:function(e){e.target.composing||t.$set(t.props,"value",e.target.value)}}})])]},proxy:!0},{key:"footer",fn:function(){return[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.modal=!1,t.emitValue()}}},[t._v("\n                Ok\n            ")])]},proxy:!0}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}}),t._v(" "),t.compValue?r("div",{staticClass:"text-end"},[r("a",{staticClass:"ms-2",attrs:{href:"javascript:;"},on:{click:function(e){t.props.value=""}}},[t._v("Apagar")]),t._v(" "),r("a",{staticClass:"ms-2",attrs:{href:t.compValue.url,target:"_blank"}},[t._v("Abrir nova aba")]),t._v(" "),r("a",{staticClass:"ms-2",attrs:{href:t.compValue.url,download:t.compValue.url}},[t._v("Download")])]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiField:r(202).default,UiModal:r(533).default})},548:function(t,e,r){"use strict";r.r(e);r(148),r(74);var l={props:{value:Array},data:function(){return{props:JSON.parse(JSON.stringify(this.$props)),filesParams:{q:"",folder:""},files:!1,edit:!1}},methods:{emitValue:function(){this.$emit("value",this.props.value),this.$emit("input",this.props.value),this.$emit("change",this.props.value)},refresh:function(){var t=this,e=this.filesParams;this.$axios.get("/api/files/search",{params:e}).then((function(e){t.files=e.data}))},selectToggle:function(t){var e=this.props.value.indexOf(t);e>=0?this.props.value.splice(e,1):this.props.value.push(t),this.emitValue()},selectedsDelete:function(){var t=this;this.$confirm("Deseja deletar ".concat(this.props.value.length," arquivos?")).then((function(e){var r={id:t.props.value.map((function(t){return t.id}))};t.$axios.post("/api/files/delete",r).then((function(e){t.refresh(),t.props.value=[]}))}))},fileClass:function(t){var e=[];return this.props.value.indexOf(t)>=0?e.push("border border-primary"):e.push("border border-white"),e},fileSave:function(){var t=this;this.$axios.post("/api/files/save",this.edit).then((function(e){t.edit=!1,t.refresh(),t.$swal.fire("","Arquivo salvo","success")}))}},mounted:function(){this.refresh()}},n=r(10),component=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"d-flex g-0 border"},[r("div",{staticClass:"bg-white border-end",staticStyle:{"min-width":"200px","max-width":"200px"}},[t.files?r("div",{staticClass:"list-group list-group-flush"},[r("div",{staticClass:"list-group-item list-group-item-primary"},[t._v("Pastas")]),t._v(" "),t._l(t.files.folders,(function(e){return r("a",{staticClass:"list-group-item",attrs:{href:"javascript:;"},on:{click:function(r){t.filesParams.folder=e.folder,t.refresh()}}},[t._v("\n                    "+t._s(e.folder||"/")+"\n                ")])}))],2):t._e()]),t._v(" "),r("div",{staticClass:"flex-grow-1 bg-light",staticStyle:{"max-width":"100%",overflow:"auto"}},[r("div",{staticClass:"bg-white p-2 d-flex align-items-center border-bottom"},[r("div",[t._v(t._s(t.filesParams.folder||"/"))]),t._v(" "),t._m(0),t._v(" "),t.props.value.length?r("div",{staticClass:"ms-1"},[r("a",{staticClass:"btn btn-sm btn-light",attrs:{href:"javascript:;"},on:{click:function(e){t.props.value=[],t.emitValue()}}},[t._v("\n                        Limpar seleções\n                    ")])]):t._e(),t._v(" "),t.props.value.length?r("div",{staticClass:"ms-1"},[r("a",{staticClass:"btn btn-sm btn-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.selectedsDelete()}}},[t._v("\n                        Deletar "+t._s(t.props.value.length)+"\n                    ")])]):t._e()]),t._v(" "),t.files?t._e():r("div",{staticClass:"p-2 text-center text-muted py-5"},[r("i",{staticClass:"fas fa-spin fa-spinner"}),t._v(" Carregando...\n            ")]),t._v(" "),t.files&&0==t.files.length?r("div",{staticClass:"p-2 text-center text-muted py-5"},[t._v("\n                Sem arquivos\n            ")]):t._e(),t._v(" "),t.files?r("div",t._l(t.files.data,(function(e){return r("div",{key:e.id,staticClass:"d-inline-flex bg-white shadow-sm m-2",class:t.fileClass(e),staticStyle:{"min-width":"150px","max-width":"150px",cursor:"pointer"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"p-2",staticStyle:{height:"150px"},on:{click:function(r){return r.target!==r.currentTarget?null:t.selectToggle(e)}}},[t._v("\n                            "+t._s(e.name)+"\n                        ")]),t._v(" "),r("a",{staticClass:"btn btn-sm btn-primary w-100 rounded-0",attrs:{href:"javascript:;"},on:{click:function(r){t.edit=e}}},[t._v("\n                            Editar\n                        ")])])])})),0):t._e()])]),t._v(" "),r("ui-modal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Editar")]},proxy:!0},{key:"body",fn:function(){return[r("ui-field",{attrs:{label:"Descrição"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.name,expression:"edit.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.edit.name},on:{input:function(e){e.target.composing||t.$set(t.edit,"name",e.target.value)}}})]),t._v(" "),r("ui-field",{attrs:{label:"Pasta"}},[r("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":""},model:{value:t.edit.folder,callback:function(e){t.$set(t.edit,"folder",e)},expression:"edit.folder"}},t._l(t.files.folders,(function(e){return r("el-option",{key:e.folder,attrs:{value:e.folder}},[t._v(t._s(e.folder||"/"))])})),1)],1)]},proxy:!0},{key:"footer",fn:function(){return[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.fileSave()}}},[t._v("\n                Salvar\n            ")])]},proxy:!0}]),model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}})],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex-grow-1"},[r("div",{staticClass:"btn"},[t._v(" ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{UiField:r(202).default,UiModal:r(533).default})},554:function(t,e,r){"use strict";r.r(e);var l={data:function(){return{upload:"",files:[]}}},n=r(10),component=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ui-upload",{on:{change:function(e){return t.$refs.file.refresh()}},model:{value:t.upload,callback:function(e){t.upload=e},expression:"upload"}}),t._v(" "),r("br"),r("br"),t._v(" "),r("ui-file",{ref:"file",model:{value:t.files,callback:function(e){t.files=e},expression:"files"}}),t._v(" "),r("br"),r("br"),t._v(" "),r("pre",[t._v(t._s(t.$data))])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiUpload:r(542).default,UiFile:r(548).default})}}]);